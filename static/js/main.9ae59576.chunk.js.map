{"version":3,"sources":["qr-scanner/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Scanner","onChange","canvas","document","createElement","canvasCtx","getContext","videoRef","React","useRef","useState","video","setVideo","tick","readyState","HAVE_ENOUGH_DATA","height","videoHeight","width","videoWidth","drawImage","imageData","getImageData","code","jsQR","data","inversionAttempts","error","RangeError","requestAnimationFrame","useEffect","stream","current","navigator","mediaDevices","getUserMedia","facingMode","then","s","srcObject","setAttribute","play","getTracks","forEach","t","stop","className","ref","onClick","QRScanner","label","showQRScanner","setShowQRScanner","App","value","setValue","href","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Sentry","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","StrictMode","getElementById"],"mappings":"8PAaMA,EAAU,SAAC,GAA6C,IAA3CC,EAA0C,EAA1CA,SACXC,EAASC,SAASC,cAAc,UAChCC,EAAYH,EAAOI,WAAW,MAE9BC,EAAWC,IAAMC,OAAyB,MAJW,EAKjCC,mBAAkC,MALD,mBAKpDC,EALoD,KAK7CC,EAL6C,KAOrDC,EAAO,SAAPA,IACJ,GACEX,GACAG,GACAM,GACAA,EAAMG,aAAeH,EAAMI,iBAC3B,CACAb,EAAOc,OAASL,EAAMM,YACtBf,EAAOgB,MAAQP,EAAMQ,WAErBd,EAAUe,UAAUT,EAAO,EAAG,EAAGA,EAAMM,YAAaN,EAAMQ,YAC1D,IAAME,EAAYhB,EAAUiB,aAC1B,EACA,EACAX,EAAMM,YACNN,EAAMQ,YAER,IACE,IAAMI,EAAOC,IAAKH,EAAUI,KAAMJ,EAAUH,MAAOG,EAAUL,OAAQ,CACnEU,kBAAmB,eAErB,GAAIH,EAEF,YADAtB,EAASsB,EAAKE,MAGhB,MAAOE,GACP,GAAIA,aAAkBC,WAAY,MAAMD,GAG5CE,sBAAsBhB,IA4BxB,OAzBAL,IAAMsB,WAAU,WACd,IAAIC,EACAxB,EAASyB,SACXpB,EAASL,EAASyB,SAEhBrB,GACFsB,UAAUC,aACPC,aAAa,CAAExB,MAAO,CAAEyB,WAAY,iBACpCC,MAAK,SAAUC,GACdP,EAASO,EACT3B,EAAM4B,UAAYR,EAClBpB,EAAM6B,aAAa,cAAe,QAClC7B,EAAM8B,OACNZ,sBAAsBhB,MAS5B,OANgB,WAAa,IAAD,EAEpB,QAAN,EAAAkB,SAAA,SAAQW,YAAYC,SAAQ,SAACC,GAC3BA,EAAEC,aAIL,CAAClC,IAGF,sBAAKmC,UAAU,UAAf,UACE,uBAAOA,UAAU,iBAAiBC,IAAKxC,IACrC,wBAAQyC,QAAS,kBAAM/C,EAAS,KAAhC,wBASKgD,EAAY,SAAC,GAAsD,IAApDhD,EAAmD,EAAnDA,SAAUiD,EAAyC,EAAzCA,MAAyC,EACnCxC,oBAAS,GAD0B,mBACtEyC,EADsE,KACvDC,EADuD,KAG7E,OACE,sBAAKN,UAAU,aAAf,UACE,wBAAQE,QAAS,kBAAMI,GAAiB,IAAxC,SAAgDF,IAC/CC,EACC,cAAC,EAAD,CACElD,SAAU,SAACsB,GACTtB,EAASsB,GACT6B,GAAiB,MAGnB,SCtFKC,MAXf,WAAgB,IAAD,EACa3C,mBAAS,IADtB,mBACN4C,EADM,KACCC,EADD,KAEZ,OACE,sBAAKT,UAAU,MAAf,UACE,mBAAGU,KAAMF,EAAT,SAAiBA,IAEjB,cAAC,EAAD,CAAWrD,SAAUsD,EAAUL,MAAM,gBCG7BO,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBtB,MAAK,YAAkD,IAA/CuB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,gBCDdO,IAAY,CACVC,IACE,4EACFC,aAAc,CAAC,IAAIC,IAAaC,gBAKhCC,iBAAkB,IAGpBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtE,SAASuE,eAAe,SAM1BjB,M","file":"static/js/main.9ae59576.chunk.js","sourcesContent":["import jsQR from \"jsqr\";\nimport React, { useState } from \"react\";\nimport \"./index.css\";\n\n/*\nBased on https://github.com/cozmo/jsQR/blob/master/docs/index.html \nand https://betterprogramming.pub/add-an-html-canvas-into-your-react-app-176dab099a79\n*/\n\ntype ScannerProps = {\n  onChange: (code: string) => void;\n};\n\nconst Scanner = ({ onChange }: ScannerProps): JSX.Element => {\n  const canvas = document.createElement(\"canvas\");\n  const canvasCtx = canvas.getContext(\"2d\");\n\n  const videoRef = React.useRef<HTMLVideoElement>(null);\n  const [video, setVideo] = useState<HTMLVideoElement | null>(null);\n\n  const tick = (): void => {\n    if (\n      canvas &&\n      canvasCtx &&\n      video &&\n      video.readyState === video.HAVE_ENOUGH_DATA\n    ) {\n      canvas.height = video.videoHeight;\n      canvas.width = video.videoWidth;\n\n      canvasCtx.drawImage(video, 0, 0, video.videoHeight, video.videoWidth);\n      const imageData = canvasCtx.getImageData(\n        0,\n        0,\n        video.videoHeight,\n        video.videoWidth\n      );\n      try {\n        const code = jsQR(imageData.data, imageData.width, imageData.height, {\n          inversionAttempts: \"dontInvert\",\n        });\n        if (code) {\n          onChange(code.data);\n          return;\n        }\n      } catch (error) {\n        if (error! instanceof RangeError) throw error;\n      }\n    }\n    requestAnimationFrame(tick);\n  };\n\n  React.useEffect(() => {\n    let stream: MediaStream;\n    if (videoRef.current) {\n      setVideo(videoRef.current);\n    }\n    if (video) {\n      navigator.mediaDevices\n        .getUserMedia({ video: { facingMode: \"environment\" } })\n        .then(function (s) {\n          stream = s;\n          video.srcObject = stream;\n          video.setAttribute(\"playsinline\", \"true\"); // required to tell iOS safari we don't want fullscreen\n          video.play();\n          requestAnimationFrame(tick);\n        });\n    }\n    const cleanup = (): void => {\n      // release webcam when it is no longer needed\n      stream?.getTracks().forEach((t) => {\n        t.stop();\n      });\n    };\n    return cleanup;\n  }, [video]);\n\n  return (\n    <div className=\"scanner\">\n      <video className=\"scanner__video\" ref={videoRef}></video>\n        <button onClick={() => onChange(\"\")}>Avbryt</button>\n    </div>\n  );\n};\n\ntype QRScannerProps = {\n  onChange: (code: string) => void;\n  label: string;\n};\nexport const QRScanner = ({ onChange, label }: QRScannerProps): JSX.Element => {\n  const [showQRScanner, setShowQRScanner] = useState(false);\n\n  return (\n    <div className=\"qr-scanner\">\n      <button onClick={() => setShowQRScanner(true)}>{label}</button>\n      {showQRScanner ? (\n        <Scanner\n          onChange={(code) => {\n            onChange(code);\n            setShowQRScanner(false);\n          }}\n        />\n      ) : null}\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { QRScanner } from './qr-scanner';\n\nfunction App() {\n  const [value, setValue] = useState(\"\")\n   return (\n     <div className=\"App\">\n       <a href={value}>{value}</a>\n       \n       <QRScanner onChange={setValue} label=\"scan qr\" />\n     </div>\n   );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\n\nSentry.init({\n  dsn:\n    \"https://175cda1b995144fca72721c4adf324bb@o556988.ingest.sentry.io/5688577\",\n  integrations: [new Integrations.BrowserTracing()],\n\n  // Set tracesSampleRate to 1.0 to capture 100%\n  // of transactions for performance monitoring.\n  // We recommend adjusting this value in production\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}